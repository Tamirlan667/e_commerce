{"ast":null,"code":"import { getFromLocalStorage, setToLocalStorage } from \"@/utils/helpers\";\nimport BaseModal from \"./UI/BaseModal.vue\";\nimport Cart from \"./Cart.vue\";\nimport BaseButton from \"./UI/Buttons/BaseButton.vue\";\nimport Likes from \"./Likes.vue\";\nimport FadeTransition from \"./UI/FadeTransition.vue\";\nimport { computed, onMounted, watch } from \"@vue/runtime-core\";\nimport { useProductStore } from \"@/store/useProductStore\";\nimport { storeToRefs } from \"pinia\";\nimport { useCartStore } from \"@/store/useCartStore\";\nimport { useLikeStore } from \"@/store/useLikeStore\";\nimport { useCommonStore } from \"@/store/useCommonStore\";\nexport default {\n  __name: 'TheMain',\n\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const productStore = useProductStore();\n    const cartStore = useCartStore();\n    const likeStore = useLikeStore();\n    const commonStore = useCommonStore();\n    const {\n      products,\n      isProducts\n    } = storeToRefs(productStore);\n    const {\n      isCartModalOpen,\n      isLikesModalOpen\n    } = storeToRefs(commonStore);\n    const {\n      isLikes,\n      likes\n    } = storeToRefs(likeStore);\n    const {\n      isProductsInCart,\n      cart\n    } = storeToRefs(cartStore);\n\n    const closeModal = modal => {\n      commonStore.closeModal(modal);\n    };\n\n    watch(() => cart.value, () => {\n      setToLocalStorage(\"cart\", cart.value);\n    }, {\n      deep: true\n    });\n    watch(() => likes.value, () => {\n      setToLocalStorage(\"likes\", likes.value);\n    }, {\n      deep: true\n    });\n    onMounted(() => {\n      const localStorageCart = getFromLocalStorage(\"cart\");\n      const localStorageLikes = getFromLocalStorage(\"likes\");\n\n      if (localStorageCart && !isProductsInCart.value) {\n        cartStore.setProductsFromLStoCart(localStorageCart);\n      }\n\n      if (localStorageLikes && !isLikes.value) {\n        likeStore.setLikesFromLS(localStorageLikes);\n      }\n\n      if (!isProducts.value) {\n        productStore.fetchProducts();\n      }\n    });\n    const __returned__ = {\n      productStore,\n      cartStore,\n      likeStore,\n      commonStore,\n      products,\n      isProducts,\n      isCartModalOpen,\n      isLikesModalOpen,\n      isLikes,\n      likes,\n      isProductsInCart,\n      cart,\n      closeModal,\n      getFromLocalStorage,\n      setToLocalStorage,\n      BaseModal,\n      Cart,\n      BaseButton,\n      Likes,\n      FadeTransition,\n      computed,\n      onMounted,\n      watch,\n      useProductStore,\n      storeToRefs,\n      useCartStore,\n      useLikeStore,\n      useCommonStore\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n};","map":{"version":3,"mappings":"AAuCA,SAASA,mBAAT,EAA8BC,iBAA9B,QAAuD,iBAAvD;AACA,OAAOC,SAAP,MAAsB,oBAAtB;AACA,OAAOC,IAAP,MAAiB,YAAjB;AACA,OAAOC,UAAP,MAAuB,6BAAvB;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,OAAOC,cAAP,MAA2B,yBAA3B;AACA,SAASC,QAAT,EAAmBC,SAAnB,EAA8BC,KAA9B,QAA2C,mBAA3C;AACA,SAASC,eAAT,QAAgC,yBAAhC;AACA,SAASC,WAAT,QAA4B,OAA5B;AACA,SAASC,YAAT,QAA6B,sBAA7B;AACA,SAASC,YAAT,QAA6B,sBAA7B;AACA,SAASC,cAAT,QAA+B,wBAA/B;;;;;;;;IAEA,MAAMC,YAAY,GAAGL,eAAe,EAApC;IACA,MAAMM,SAAS,GAAGJ,YAAY,EAA9B;IACA,MAAMK,SAAS,GAAGJ,YAAY,EAA9B;IACA,MAAMK,WAAW,GAAGJ,cAAc,EAAlC;IAEA,MAAM;MAAEK,QAAF;MAAYC;IAAZ,IAA2BT,WAAW,CAACI,YAAD,CAA5C;IACA,MAAM;MAAEM,eAAF;MAAmBC;IAAnB,IAAwCX,WAAW,CAACO,WAAD,CAAzD;IACA,MAAM;MAAEK,OAAF;MAAWC;IAAX,IAAqBb,WAAW,CAACM,SAAD,CAAtC;IACA,MAAM;MAAEQ,gBAAF;MAAoBC;IAApB,IAA6Bf,WAAW,CAACK,SAAD,CAA9C;;IAEA,MAAMW,UAAU,GAAIC,KAAD,IAAW;MAC5BV,WAAW,CAACS,UAAZ,CAAuBC,KAAvB;IACD,CAFD;;IAIAnB,KAAK,CACH,MAAMiB,IAAI,CAACG,KADR,EAEH,MAAM;MACJ5B,iBAAiB,CAAC,MAAD,EAASyB,IAAI,CAACG,KAAd,CAAjB;IACD,CAJE,EAKH;MAAEC,IAAI,EAAE;IAAR,CALG,CAAL;IAQArB,KAAK,CACH,MAAMe,KAAK,CAACK,KADT,EAEH,MAAM;MACJ5B,iBAAiB,CAAC,OAAD,EAAUuB,KAAK,CAACK,KAAhB,CAAjB;IACD,CAJE,EAKH;MAAEC,IAAI,EAAE;IAAR,CALG,CAAL;IAQAtB,SAAS,CAAC,MAAM;MACd,MAAMuB,gBAAgB,GAAG/B,mBAAmB,CAAC,MAAD,CAA5C;MACA,MAAMgC,iBAAiB,GAAGhC,mBAAmB,CAAC,OAAD,CAA7C;;MAEA,IAAI+B,gBAAgB,IAAI,CAACN,gBAAgB,CAACI,KAA1C,EAAiD;QAC/Cb,SAAS,CAACiB,uBAAV,CAAkCF,gBAAlC;MACD;;MAED,IAAIC,iBAAiB,IAAI,CAACT,OAAO,CAACM,KAAlC,EAAyC;QACvCZ,SAAS,CAACiB,cAAV,CAAyBF,iBAAzB;MACD;;MAED,IAAI,CAACZ,UAAU,CAACS,KAAhB,EAAuB;QACrBd,YAAY,CAACoB,aAAb;MACD;IACF,CAfQ,CAAT","names":["getFromLocalStorage","setToLocalStorage","BaseModal","Cart","BaseButton","Likes","FadeTransition","computed","onMounted","watch","useProductStore","storeToRefs","useCartStore","useLikeStore","useCommonStore","productStore","cartStore","likeStore","commonStore","products","isProducts","isCartModalOpen","isLikesModalOpen","isLikes","likes","isProductsInCart","cart","closeModal","modal","value","deep","localStorageCart","localStorageLikes","setProductsFromLStoCart","setLikesFromLS","fetchProducts"],"sources":["/Users/tamirlankarimov/Desktop/Vue_Project_ecommerce/e-commerce-app/src/components/TheMain.vue"],"sourcesContent":["<template>\n  <main class=\"main\">\n    <teleport to=\"body\">\n      <BaseModal :isModalOpen=\"isCartModalOpen\" type=\"cart\" title=\"Your cart\">\n        <Cart v-if=\"isProductsInCart\" @onClick=\"closeModal('cart')\" />\n        <p v-else>Your cart is empty</p>\n        <template #actions>\n          <router-link to=\"/checkout\" v-if=\"isProductsInCart\">\n            <BaseButton\n              variant=\"contained\"\n              mode=\"success\"\n              @click=\"closeModal('cart')\"\n              >Checkout</BaseButton\n            >\n          </router-link>\n        </template>\n      </BaseModal>\n    </teleport>\n\n    <teleport to=\"body\">\n      <BaseModal\n        :isModalOpen=\"isLikesModalOpen\"\n        type=\"likes\"\n        title=\"Your likes\"\n      >\n        <Likes v-if=\"isLikes\" @onClick=\"closeModal('likes')\" />\n        <p v-else>No likes yet</p>\n      </BaseModal>\n    </teleport>\n\n    <router-view v-slot=\"{ Component }\">\n      <FadeTransition>\n        <component :is=\"Component\" />\n      </FadeTransition>\n    </router-view>\n  </main>\n</template>\n\n<script setup>\nimport { getFromLocalStorage, setToLocalStorage } from \"@/utils/helpers\";\nimport BaseModal from \"./UI/BaseModal.vue\";\nimport Cart from \"./Cart.vue\";\nimport BaseButton from \"./UI/Buttons/BaseButton.vue\";\nimport Likes from \"./Likes.vue\";\nimport FadeTransition from \"./UI/FadeTransition.vue\";\nimport { computed, onMounted, watch } from \"@vue/runtime-core\";\nimport { useProductStore } from \"@/store/useProductStore\";\nimport { storeToRefs } from \"pinia\";\nimport { useCartStore } from \"@/store/useCartStore\";\nimport { useLikeStore } from \"@/store/useLikeStore\";\nimport { useCommonStore } from \"@/store/useCommonStore\";\n\nconst productStore = useProductStore();\nconst cartStore = useCartStore();\nconst likeStore = useLikeStore();\nconst commonStore = useCommonStore();\n\nconst { products, isProducts } = storeToRefs(productStore);\nconst { isCartModalOpen, isLikesModalOpen } = storeToRefs(commonStore);\nconst { isLikes, likes } = storeToRefs(likeStore);\nconst { isProductsInCart, cart } = storeToRefs(cartStore);\n\nconst closeModal = (modal) => {\n  commonStore.closeModal(modal);\n};\n\nwatch(\n  () => cart.value,\n  () => {\n    setToLocalStorage(\"cart\", cart.value);\n  },\n  { deep: true }\n);\n\nwatch(\n  () => likes.value,\n  () => {\n    setToLocalStorage(\"likes\", likes.value);\n  },\n  { deep: true }\n);\n\nonMounted(() => {\n  const localStorageCart = getFromLocalStorage(\"cart\");\n  const localStorageLikes = getFromLocalStorage(\"likes\");\n\n  if (localStorageCart && !isProductsInCart.value) {\n    cartStore.setProductsFromLStoCart(localStorageCart);\n  }\n\n  if (localStorageLikes && !isLikes.value) {\n    likeStore.setLikesFromLS(localStorageLikes);\n  }\n\n  if (!isProducts.value) {\n    productStore.fetchProducts();\n  }\n});\n</script>\n\n<style scoped>\n.main {\n  padding: 20px 0 40px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}