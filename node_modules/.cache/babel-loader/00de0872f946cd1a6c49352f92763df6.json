{"ast":null,"code":"import BaseCard from \"./UI/BaseCard.vue\";\nimport BaseForm from \"./UI/BaseForm.vue\";\nimport BaseHeading from \"./UI/BaseHeading.vue\";\nimport BaseInput from \"./UI/BaseInput.vue\";\nimport BaseButton from \"./UI/Buttons/BaseButton.vue\";\nimport FadeTransition from \"./UI/FadeTransition.vue\";\nimport { INPUT_FIELDS } from \"@/constants/checkoutFormInputs\";\nimport { reactive, ref } from \"@vue/reactivity\";\nimport { useRouter } from \"vue-router\";\nimport { computed, watch } from \"@vue/runtime-core\";\nimport { useCartStore } from \"@/store/useCartStore\";\nimport { clearLocalStorare } from \"@/utils/helpers\";\nexport default {\n  __name: 'CheckoutForm',\n  props: {\n    delivery: {\n      type: [null, Object],\n      required: true\n    },\n    location: {\n      type: [null, String],\n      required: true\n    }\n  },\n\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const props = __props;\n    const USER_INPUT_INIT = {\n      name: \"\",\n      phone: \"\",\n      comment: \"\",\n      location: \"\",\n      email: \"\",\n      address: \"\"\n    };\n    const router = useRouter();\n    const cartStore = useCartStore();\n    const inputFields = INPUT_FIELDS;\n    const userInput = reactive({ ...USER_INPUT_INIT\n    });\n    const formError = reactive({});\n\n    const handleChange = e => {\n      const field = e.target.name;\n      const value = e.target.value;\n      clearValidation(field);\n      userInput[field] = value;\n    };\n\n    const clearValidation = field => {\n      if (field) {\n        formError[field] = \"\";\n        return;\n      }\n\n      Object.assign(formError, {});\n    };\n\n    const validateForm = () => {\n      let isFormValid = true;\n      const isNameInputValid = userInput.name.trim().length > 2;\n      const isPhoneValid = userInput.phone.trim().length >= 10 && userInput.phone.trim().length <= 20;\n\n      if (!isNameInputValid || !isPhoneValid) {\n        formError.name = isNameInputValid ? \"\" : \"Name cannot be less or equal than 2 letters\";\n        formError.phone = isPhoneValid ? \"\" : \"Phone number digits range is 10-20\", isFormValid = false;\n      }\n\n      return isFormValid;\n    };\n\n    const submitForm = () => {\n      if (!validateForm()) return;\n      console.log(\"order:\", {\n        id: 1,\n        customer: {\n          name: userInput.name,\n          phone: userInput.phone,\n          email: userInput.email,\n          comment: userInput.comment\n        },\n        products: props.cart,\n        delivery: { ...props.delivery,\n          region: userInput.location,\n          address: userInput.address\n        }\n      });\n      router.replace(\"/checkout/success\");\n      clearLocalStorare(\"cart\");\n      cartStore.clearCart();\n      Object.assign(userInput, USER_INPUT_INIT);\n    };\n\n    const inputs = computed(() => {\n      return inputFields.filter(field => {\n        if (!props.delivery.type) return field;\n\n        if (props.delivery.type === \"pickup\") {\n          return field.name !== \"location\" && field.name !== \"address\";\n        }\n\n        return field;\n      });\n    });\n    watch(() => props.location, () => {\n      userInput.location = props.location;\n    }, {\n      immediate: true\n    });\n    const __returned__ = {\n      USER_INPUT_INIT,\n      props,\n      router,\n      cartStore,\n      inputFields,\n      userInput,\n      formError,\n      handleChange,\n      clearValidation,\n      validateForm,\n      submitForm,\n      inputs,\n      BaseCard,\n      BaseForm,\n      BaseHeading,\n      BaseInput,\n      BaseButton,\n      FadeTransition,\n      INPUT_FIELDS,\n      reactive,\n      ref,\n      useRouter,\n      computed,\n      watch,\n      useCartStore,\n      clearLocalStorare\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n};","map":{"version":3,"mappings":"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","names":["BaseCard","BaseForm","BaseHeading","BaseInput","BaseButton","FadeTransition","INPUT_FIELDS","reactive","ref","useRouter","computed","watch","useCartStore","clearLocalStorare","USER_INPUT_INIT","name","phone","comment","location","email","address","router","cartStore","inputFields","userInput","formError","handleChange","e","field","target","value","clearValidation","Object","assign","validateForm","isFormValid","isNameInputValid","trim","length","isPhoneValid","submitForm","console","log","id","customer","products","props","cart","delivery","region","replace","clearCart","inputs","filter","type","immediate"],"sources":["/Users/tamirlankarimov/Desktop/Vue_Project_ecommerce/e-commerce-app/src/components/CheckoutForm.vue"],"sourcesContent":["<template>\n  <FadeTransition>\n    <BaseCard>\n      <BaseHeading variant=\"h2\">Your personal data</BaseHeading>\n      <div class=\"checkout-form\">\n        <BaseForm @submit.prevent=\"submitForm\">\n          <ul class=\"checkout-form__input-list\">\n            <li v-for=\"input in inputs\" :key=\"input.label\">\n              <BaseInput\n                :placeholder=\"input.placeholder\"\n                :label=\"input.label\"\n                :type=\"input.type\"\n                :name=\"input.name\"\n                :required=\"input.required\"\n                :error=\"formError[input?.name]\"\n                :value=\"userInput[input.name]\"\n                :handleChange=\"handleChange\"\n              />\n            </li>\n          </ul>\n\n          <BaseButton variant=\"contained\" type=\"submit\" mode=\"success\"\n            >Submit</BaseButton\n          >\n        </BaseForm>\n      </div>\n    </BaseCard>\n  </FadeTransition>\n</template>\n\n<script setup>\nimport BaseCard from \"./UI/BaseCard.vue\";\nimport BaseForm from \"./UI/BaseForm.vue\";\nimport BaseHeading from \"./UI/BaseHeading.vue\";\nimport BaseInput from \"./UI/BaseInput.vue\";\nimport BaseButton from \"./UI/Buttons/BaseButton.vue\";\nimport FadeTransition from \"./UI/FadeTransition.vue\";\nimport { INPUT_FIELDS } from \"@/constants/checkoutFormInputs\";\nimport { reactive, ref } from \"@vue/reactivity\";\nimport { useRouter } from \"vue-router\";\nimport { computed, watch } from \"@vue/runtime-core\";\nimport { useCartStore } from \"@/store/useCartStore\";\nimport { clearLocalStorare } from \"@/utils/helpers\";\n\nconst USER_INPUT_INIT = {\n  name: \"\",\n  phone: \"\",\n  comment: \"\",\n  location: \"\",\n  email: \"\",\n  address: \"\",\n};\n\nconst props = defineProps({\n  delivery: {\n    type: [null, Object],\n    required: true,\n  },\n  location: {\n    type: [null, String],\n    required: true,\n  },\n});\n\nconst router = useRouter();\nconst cartStore = useCartStore();\n\nconst inputFields = INPUT_FIELDS;\nconst userInput = reactive({ ...USER_INPUT_INIT });\nconst formError = reactive({});\n\nconst handleChange = (e) => {\n  const field = e.target.name;\n  const value = e.target.value;\n\n  clearValidation(field);\n  userInput[field] = value;\n};\n\nconst clearValidation = (field) => {\n  if (field) {\n    formError[field] = \"\";\n    return;\n  }\n\n  Object.assign(formError, {});\n};\n\nconst validateForm = () => {\n  let isFormValid = true;\n  const isNameInputValid = userInput.name.trim().length > 2;\n  const isPhoneValid =\n    userInput.phone.trim().length >= 10 && userInput.phone.trim().length <= 20;\n\n  if (!isNameInputValid || !isPhoneValid) {\n    formError.name = isNameInputValid\n      ? \"\"\n      : \"Name cannot be less or equal than 2 letters\";\n    (formError.phone = isPhoneValid\n      ? \"\"\n      : \"Phone number digits range is 10-20\"),\n      (isFormValid = false);\n  }\n\n  return isFormValid;\n};\n\nconst submitForm = () => {\n  if (!validateForm()) return;\n\n  console.log(\"order:\", {\n    id: 1,\n    customer: {\n      name: userInput.name,\n      phone: userInput.phone,\n      email: userInput.email,\n      comment: userInput.comment,\n    },\n    products: props.cart,\n    delivery: {\n      ...props.delivery,\n      region: userInput.location,\n      address: userInput.address,\n    },\n  });\n\n  router.replace(\"/checkout/success\");\n  clearLocalStorare(\"cart\");\n  cartStore.clearCart();\n\n  Object.assign(userInput, USER_INPUT_INIT);\n};\n\nconst inputs = computed(() => {\n  return inputFields.filter((field) => {\n    if (!props.delivery.type) return field;\n\n    if (props.delivery.type === \"pickup\") {\n      return field.name !== \"location\" && field.name !== \"address\";\n    }\n\n    return field;\n  });\n});\n\nwatch(\n  () => props.location,\n  () => {\n    userInput.location = props.location;\n  },\n  { immediate: true }\n);\n</script>\n\n<style>\n.checkout-form {\n  max-width: 100%;\n}\n\n.checkout-form__input-list {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  list-style: none;\n  padding: 0;\n}\n\n@media screen and (min-width: 768px) {\n  .checkout-form {\n    max-width: 40%;\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}