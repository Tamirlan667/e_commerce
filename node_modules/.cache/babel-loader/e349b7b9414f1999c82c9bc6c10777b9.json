{"ast":null,"code":"import { createTextVNode as _createTextVNode, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, withModifiers as _withModifiers, createBlock as _createBlock } from \"vue\";\n\nconst _hoisted_1 = /*#__PURE__*/_createTextVNode(\"Your personal data\");\n\nconst _hoisted_2 = {\n  class: \"checkout-form\"\n};\nconst _hoisted_3 = {\n  class: \"checkout-form__input-list\"\n};\n\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\"Submit\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createBlock($setup[\"FadeTransition\"], null, {\n    default: _withCtx(() => [_createVNode($setup[\"BaseCard\"], null, {\n      default: _withCtx(() => [_createVNode($setup[\"BaseHeading\"], {\n        variant: \"h2\"\n      }, {\n        default: _withCtx(() => [_hoisted_1]),\n        _: 1\n        /* STABLE */\n\n      }), _createElementVNode(\"div\", _hoisted_2, [_createVNode($setup[\"BaseForm\"], {\n        onSubmit: _withModifiers($setup.submitForm, [\"prevent\"])\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"ul\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.inputs, input => {\n          return _openBlock(), _createElementBlock(\"li\", {\n            key: input.label\n          }, [_createVNode($setup[\"BaseInput\"], {\n            placeholder: input.placeholder,\n            label: input.label,\n            type: input.type,\n            name: input.name,\n            required: input.required,\n            error: $setup.formError[input?.name],\n            value: $setup.userInput[input.name],\n            handleChange: $setup.handleChange\n          }, null, 8\n          /* PROPS */\n          , [\"placeholder\", \"label\", \"type\", \"name\", \"required\", \"error\", \"value\"])]);\n        }), 128\n        /* KEYED_FRAGMENT */\n        ))]), _createVNode($setup[\"BaseButton\"], {\n          variant: \"contained\",\n          type: \"submit\",\n          mode: \"success\"\n        }, {\n          default: _withCtx(() => [_hoisted_4]),\n          _: 1\n          /* STABLE */\n\n        })]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"onSubmit\"])])]),\n      _: 1\n      /* STABLE */\n\n    })]),\n    _: 1\n    /* STABLE */\n\n  });\n}","map":{"version":3,"mappings":";;iDAGgC;;;EACrBA,KAAK,EAAC;;;EAEHA,KAAK,EAAC;;;iDAgBP;;;uBArBXC,aA0BiBC,wBA1BjB,EA0BiB,IA1BjB,EA0BiB;sBAzBf,MAwBW,CAxBXC,aAwBWD,kBAxBX,EAwBW,IAxBX,EAwBW;wBAvBT,MAA0D,CAA1DC,aAA0DD,qBAA1D,EAA0D;QAA7CE,OAAO,EAAC;MAAqC,CAA1D,EAAyB;0BAAC,MAAkB,aAAnB;;;;MAAA,CAAzB,CAA0D,EAC1DC,oBAqBM,KArBN,cAqBM,CApBJF,aAmBWD,kBAnBX,EAmBW;QAnBAI,QAAM,iBAAUJ,iBAAV,EAAoB,WAApB;MAmBN,CAnBX;0BACE,MAaK,CAbLG,oBAaK,IAbL,cAaK,oBAZHE,oBAWKC,SAXL,EAWK,IAXL,EAWKC,YAXeP,aAWf,EAXMQ,KAAe,IAAV;+BAAhBH,oBAWK,IAXL,EAWK;YAXwBI,GAAG,EAAED,KAAK,CAACE;UAWnC,CAXL,GACET,aASED,mBATF,EASE;YARCW,WAAW,EAAEH,KAAK,CAACG,WAQpB;YAPCD,KAAK,EAAEF,KAAK,CAACE,KAOd;YANCE,IAAI,EAAEJ,KAAK,CAACI,IAMb;YALCC,IAAI,EAAEL,KAAK,CAACK,IAKb;YAJCC,QAAQ,EAAEN,KAAK,CAACM,QAIjB;YAHCC,KAAK,EAAEf,iBAAUQ,KAAK,EAAEK,IAAjB,CAGR;YAFCG,KAAK,EAAEhB,iBAAUQ,KAAK,CAACK,IAAhB,CAER;YADCI,YAAY,EAAEjB;UACf,CATF;;UAAA,0EADF;SAWK,CAXL;;QAAA,CAYG,EAbL,CAaK,EAELC,aAECD,oBAFD,EAEC;UAFWE,OAAO,EAAC,WAEnB;UAF+BU,IAAI,EAAC,QAEpC;UAF6CM,IAAI,EAAC;QAElD,CAFD;4BACG,MAAM;;;;SADT,CAFK;;;;OAdP;;MAAA,eAoBI,CArBN,CAD0D,EAuBjD;;;;IAAA,CAxBX,CAwBW,EACI;;;;EAAA,CA1BjB","names":["class","_createBlock","$setup","_createVNode","variant","_createElementVNode","onSubmit","_createElementBlock","_Fragment","_renderList","input","key","label","placeholder","type","name","required","error","value","handleChange","mode"],"sourceRoot":"","sources":["/Users/tamirlankarimov/Desktop/Vue_Project_ecommerce/e-commerce-app/src/components/CheckoutForm.vue"],"sourcesContent":["<template>\n  <FadeTransition>\n    <BaseCard>\n      <BaseHeading variant=\"h2\">Your personal data</BaseHeading>\n      <div class=\"checkout-form\">\n        <BaseForm @submit.prevent=\"submitForm\">\n          <ul class=\"checkout-form__input-list\">\n            <li v-for=\"input in inputs\" :key=\"input.label\">\n              <BaseInput\n                :placeholder=\"input.placeholder\"\n                :label=\"input.label\"\n                :type=\"input.type\"\n                :name=\"input.name\"\n                :required=\"input.required\"\n                :error=\"formError[input?.name]\"\n                :value=\"userInput[input.name]\"\n                :handleChange=\"handleChange\"\n              />\n            </li>\n          </ul>\n\n          <BaseButton variant=\"contained\" type=\"submit\" mode=\"success\"\n            >Submit</BaseButton\n          >\n        </BaseForm>\n      </div>\n    </BaseCard>\n  </FadeTransition>\n</template>\n\n<script setup>\nimport BaseCard from \"./UI/BaseCard.vue\";\nimport BaseForm from \"./UI/BaseForm.vue\";\nimport BaseHeading from \"./UI/BaseHeading.vue\";\nimport BaseInput from \"./UI/BaseInput.vue\";\nimport BaseButton from \"./UI/Buttons/BaseButton.vue\";\nimport FadeTransition from \"./UI/FadeTransition.vue\";\nimport { INPUT_FIELDS } from \"@/constants/checkoutFormInputs\";\nimport { reactive, ref } from \"@vue/reactivity\";\nimport { useRouter } from \"vue-router\";\nimport { computed, watch } from \"@vue/runtime-core\";\nimport { useCartStore } from \"@/store/useCartStore\";\nimport { clearLocalStorare } from \"@/utils/helpers\";\n\nconst USER_INPUT_INIT = {\n  name: \"\",\n  phone: \"\",\n  comment: \"\",\n  location: \"\",\n  email: \"\",\n  address: \"\",\n};\n\nconst props = defineProps({\n  delivery: {\n    type: [null, Object],\n    required: true,\n  },\n  location: {\n    type: [null, String],\n    required: true,\n  },\n});\n\nconst router = useRouter();\nconst cartStore = useCartStore();\n\nconst inputFields = INPUT_FIELDS;\nconst userInput = reactive({ ...USER_INPUT_INIT });\nconst formError = reactive({});\n\nconst handleChange = (e) => {\n  const field = e.target.name;\n  const value = e.target.value;\n\n  clearValidation(field);\n  userInput[field] = value;\n};\n\nconst clearValidation = (field) => {\n  if (field) {\n    formError[field] = \"\";\n    return;\n  }\n\n  Object.assign(formError, {});\n};\n\nconst validateForm = () => {\n  let isFormValid = true;\n  const isNameInputValid = userInput.name.trim().length > 2;\n  const isPhoneValid =\n    userInput.phone.trim().length >= 10 && userInput.phone.trim().length <= 20;\n\n  if (!isNameInputValid || !isPhoneValid) {\n    formError.name = isNameInputValid\n      ? \"\"\n      : \"Name cannot be less or equal than 2 letters\";\n    (formError.phone = isPhoneValid\n      ? \"\"\n      : \"Phone number digits range is 10-20\"),\n      (isFormValid = false);\n  }\n\n  return isFormValid;\n};\n\nconst submitForm = () => {\n  if (!validateForm()) return;\n\n  console.log(\"order:\", {\n    id: 1,\n    customer: {\n      name: userInput.name,\n      phone: userInput.phone,\n      email: userInput.email,\n      comment: userInput.comment,\n    },\n    products: props.cart,\n    delivery: {\n      ...props.delivery,\n      region: userInput.location,\n      address: userInput.address,\n    },\n  });\n\n  router.replace(\"/checkout/success\");\n  clearLocalStorare(\"cart\");\n  cartStore.clearCart();\n\n  Object.assign(userInput, USER_INPUT_INIT);\n};\n\nconst inputs = computed(() => {\n  return inputFields.filter((field) => {\n    if (!props.delivery.type) return field;\n\n    if (props.delivery.type === \"pickup\") {\n      return field.name !== \"location\" && field.name !== \"address\";\n    }\n\n    return field;\n  });\n});\n\nwatch(\n  () => props.location,\n  () => {\n    userInput.location = props.location;\n  },\n  { immediate: true }\n);\n</script>\n\n<style>\n.checkout-form {\n  max-width: 100%;\n}\n\n.checkout-form__input-list {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  list-style: none;\n  padding: 0;\n}\n\n@media screen and (min-width: 768px) {\n  .checkout-form {\n    max-width: 40%;\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}